import{m as z,n as D,P as M,r,u as O,a as R,b as E,A as I,c as L,j as e,f as S,d as A,S as B,e as V,g as i,h as W,i as $,B as H,k as F,R as U,l as G,C as Z,W as J,o as q}from"./vendor.69b7f72f.js";const Y=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))c(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&c(l)}).observe(document,{childList:!0,subtree:!0});function s(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerpolicy&&(n.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?n.credentials="include":t.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function c(t){if(t.ep)return;t.ep=!0;const n=s(t);fetch(t.href,n)}};Y();const Q=o=>`https://gravatar.com/avatar/${z(o)}?s=400&d=robohash&r=x`,X=()=>D(" "),ee="0.1.0",te="blog_sol",se=[{name:"USER_SEED",type:"bytes",value:"[117, 115, 101, 114]"},{name:"POST_SEED",type:"bytes",value:"[112, 111, 115, 116]"}],ne=[{name:"initUser",accounts:[{name:"userAccount",isMut:!0,isSigner:!1},{name:"authority",isMut:!0,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"name",type:"string"},{name:"avatar",type:"string"}]},{name:"createPost",accounts:[{name:"postAccount",isMut:!0,isSigner:!1},{name:"userAccount",isMut:!0,isSigner:!1},{name:"authority",isMut:!0,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"title",type:"string"},{name:"content",type:"string"}]}],oe=[{name:"UserAccount",type:{kind:"struct",fields:[{name:"name",type:"string"},{name:"avatar",type:"string"},{name:"authority",type:"publicKey"},{name:"lastPostId",type:"u8"},{name:"postCount",type:"u8"}]}},{name:"PostAccount",type:{kind:"struct",fields:[{name:"id",type:"u8"},{name:"title",type:"string"},{name:"content",type:"string"},{name:"user",type:"publicKey"},{name:"authority",type:"publicKey"}]}}],ae={address:"ARegp6JaVVGNVZR53ZavVvcZVGdyw21mVmJFgbaVnM3Z"};var C={version:ee,name:te,constants:se,instructions:ne,accounts:oe,metadata:ae};const re=new M(C.metadata.address),K=r.exports.createContext(),T=()=>{const o=r.exports.useContext(K);if(!o)throw new Error("Parent must be wrapped inside PostsProvider");return o},ce=({children:o})=>{const[a,s]=r.exports.useState(),[c,t]=r.exports.useState(!1),[n,l]=r.exports.useState(!1),[p,g]=r.exports.useState(!1),[m,v]=r.exports.useState(0),[y,k]=r.exports.useState([]),w=O(),{connection:N}=R(),{publicKey:u}=E(),d=r.exports.useMemo(()=>{if(w){const h=new I(N,w,I.defaultOptions());return new L(C,re,h)}},[N,w]);r.exports.useEffect(()=>{(async()=>{if(d&&u)try{const[P]=await S([A.encode("user"),u.toBuffer()],d.programId),f=await d.account.userAccount.fetch(P);if(f){t(!0),s(f),v(f.lastPostId);const b=await d.account.postAccount.all();k(b),console.log(b)}}catch{console.log("No User"),t(!1)}finally{}})()},[d,u,n]);const x=async()=>{if(d&&u)try{l(!0);const h=X(),P=Q(h),[f]=await S([A.encode("user"),u.toBuffer()],d.programId);await d.methods.initUser(h,P).accounts({userAccount:f,authority:u,systemProgram:B.programId}).rpc(),t(!0)}catch(h){console.log(h)}finally{l(!1)}},j=async(h,P)=>{if(d&&u){l(!0);try{const[f]=await S([A.encode("user"),u.toBuffer()],d.programId),[b]=S([A.encode("post"),u.toBuffer(),Uint8Array.from([m])],d.programId);await d.methods.createPost(h,P).accounts({postAccount:b,userAccount:f,authority:u,systemProgram:B.programId}).rpc(),g(!1)}catch(f){console.log(f)}finally{l(!1)}}};return e(K.Provider,{value:{user:a,initialized:c,initUser:x,showModal:p,setShowModal:g,createPost:j,posts:y},children:o})};async function ie(o,a){try{const s=await a.account.postAccount.fetch(new M(o)),c=s.user.toString();return c===B.programId.toString()?void 0:{id:o,title:s.title,content:s.content,userId:c}}catch(s){console.log(s.message)}}const le=new M(C.metadata.address);function de(o){return new L(C,le,o)}const ue=()=>{const{id:o}=V(),a=O(),{connection:s}=R(),[c,t]=r.exports.useState(),[n,l]=r.exports.useState();return r.exports.useEffect(()=>{try{c&&(async()=>{const g=de(c),m=await ie(o.toString(),g);l(m)})()}catch{}},[c]),r.exports.useEffect(()=>{if(a){const p=new I(s,a,{});t(p)}},[s,a]),i("article",{className:"hentry background-color",children:[e("h1",{className:"entry-title",children:n?.title}),e("div",{className:"entry-meta",children:i("p",{children:[e("span",{className:"author",children:e("a",{href:"#",children:"SOLANA BLOCKCHAIN"})})," ",e("span",{className:"date",children:"creator: Howell Batula"})]})}),e("div",{className:"entry-content",children:e("p",{children:n?.content})})]})},_=({children:o,loading:a=!1,disabled:s,className:c="",leftIcon:t,...n})=>(s=s||a,i("button",{disabled:s,className:`rounded-lg flex justify-center items-center py-2 px-4 border border-transparent text-sm font-medium text-white bg-gradient-to-r pink focus:outline-none shadow-md 
			${c} ${s?"opacity-60 cursor-not-allowed":"transform hover:-translate-y-px focus:shadow-sm focus:-translate-y-0"}
			`,...n,children:[!s&&!a&&t,s&&!a&&e("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),a&&e("svg",{className:"animate-spin h-5 w-5 text-white mr-1",viewBox:"0 0 24 24",children:e("path",{fill:"currentColor",d:"M12,4V2A10,10 0 0,0 2,12H4A8,8 0 0,1 12,4Z"})}),o]})),me=o=>{const{user:a}=T(),{onSubmit:s,postTitle:c,postContent:t,setPostContent:n,setPostTitle:l,formHeader:p,buttonText:g="Post"}=o,[m,v]=r.exports.useState(!1);return i("div",{className:"rounded-lg py-4 px-6 bg- flex flex-col ",children:[p,e("input",{value:c,onChange:y=>l(y.target.value),type:"text",placeholder:"Post title",className:"bg-white rounded-3xl h-10 px-4 black"}),e("textarea",{value:t,onChange:y=>n(y.target.value),name:"content",id:"content-area",rows:3,placeholder:"Describe your post...",className:"bg-white rounded-xl px-4 py-2 mt-3 black"}),e(_,{className:"mt-3",disabled:!a,loading:m,onClick:async()=>{v(!0),await s(),v(!1)},children:g})]})},pe=()=>{const o=W(),[a,s]=r.exports.useState(!1),{connected:c,select:t}=E(),[n,l]=r.exports.useState(""),[p,g]=r.exports.useState(""),{user:m,initialized:v,initUser:y,showModal:k,setShowModal:w,createPost:N,posts:u}=T(),d=()=>{s(!0),t($)};return r.exports.useEffect(()=>{m&&s(!1)},[m]),i("div",{className:"dashboard background-color overflow-auto h-screen",children:[e("header",{className:"fixed z-10 w-full h-14  shadow-md",children:i("div",{className:"flex justify-between items-center h-full container",children:[e("h2",{className:"text-2xl font-bold",children:e("div",{className:"bg-clip-text bg-gradient-to-br from-indigo-300 colorpink",children:"Solana Reddit"})}),c?i("div",{className:"flex items-center",children:[e("img",{src:m?.avatar,alt:"avatar",className:"w-8 h-8 rounded-full bg-gray-200 shadow ring-2 ring-indigo-400 ring-offset-2 ring-opacity-50"}),e("p",{className:" font-bold text-sm ml-2 capitalize",children:m?.name}),v?e(_,{className:"ml-3 mr-2",onClick:()=>{w(!0)},children:"Create Post"}):e(_,{className:"ml-3 mr-2",onClick:()=>{y()},children:"Initialized User"})]}):e(_,{loading:a,className:"w-28",onClick:d,leftIcon:e("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),children:"Connect"})]})}),i("main",{className:"dashboard-main pb-4 container flex relative",children:[e("div",{className:"pt-3",children:i("div",{className:"row",children:[i("article",{className:"best-post",children:[e("div",{className:"best-post-image",style:{backgroundImage:'url("https://imgs.hipertextual.com/wp-content/uploads/2021/08/reddit-2.png")'}}),i("div",{className:"best-post-content",children:[i("div",{className:"best-post-content-cat",children:["Solana Developer ",e("span",{className:"dot",children:" "}),"Blog"]}),e("div",{className:"best-post-content-title",children:"SOLANA REDDIT                "}),e("div",{className:"best-post-content-sub",children:"A PROJECT FOR SOLANA BOOTCAMP                         "})]})]}),e("div",{className:"all__posts",children:u.map(x=>e("article",{className:"post__card-2",onClick:()=>{o.push(`/read-post/${x.publicKey.toString()}`)},children:i("div",{className:"post__card_-2",children:[e("div",{className:"post__card__image-2",style:{backgroundImage:'url("https://media.wired.com/photos/5a55b7eb091d162e40e4b202/191:100/w_1280,c_limit/reddit-alien-red.jpg")'}}),e("div",{children:i("div",{className:"post__card_meta-2",children:[i("div",{className:"post__card_cat",children:[e("span",{className:"dot",children:" "}),x.account.title," "]}),e("p",{className:"post__card_alttitle-2",children:x.account.content})]})})]})},x.account.id))})]})}),e("div",{className:`modal ${k&&"show-modal"}`,children:i("div",{className:"modal-content",children:[e("span",{className:"close-button",onClick:()=>w(!1),children:"\xD7"}),e(me,{postTitle:n,postContent:p,setPostTitle:l,setPostContent:g,onSubmit:()=>N(n,p)})]})})]})]})},he=()=>e(H,{children:i(F,{children:[e(U,{path:"/",exact:!0,children:e(pe,{})}),e(U,{path:"/read-post/:id",children:e(ue,{})})]})});const fe=()=>{const o="https://twilight-methodical-sky.solana-devnet.discover.quiknode.pro/7d464082b4e6eb653671abc14c117d05d0c6c47c/",a=r.exports.useMemo(()=>[new G],[]);return e(Z,{endpoint:o,children:e(J,{wallets:a,autoConnect:!0,children:e(ce,{children:e(he,{})})})})};q.render(e(fe,{}),document.getElementById("root"));
